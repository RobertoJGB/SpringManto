<!DOCTYPE html>
<html lang="en" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">

<head>
    <meta charset="UTF-8">
    <title>Home</title>
</head>

<body>
    <div th:if="${param.logout}" id="msgLogout" style="color: green;">
        Logout realizado com sucesso!
    </div>

    <form th:action="@{/logout}" method="post" style="display: inline;" sec:authorize="isAuthenticated()">
        <button type="submit"
            style="background: none; border: none; color: #007BFF; text-decoration: underline; cursor: pointer; padding: 0; font: inherit;">
            Sair
        </button>
    </form>
    

    <a href="/login"
        style="display: inline-block; padding: 8px 16px; background-color: #007BFF; color: white; text-decoration: none; border-radius: 4px;"
        sec:authorize="isAnonymous()">
        Login
    </a>

    
    <button
        style="display: inline-block; padding: 8px 16px; background-color: #007BFF; color: white; text-decoration: none; border-radius: 4px;"
        sec:authorize="hasRole('SELLER')" onclick="window.location.href='/products/new-product'">
        Criar produto
    </button>

    <button
        style="display: inline-block; padding: 8px 16px; background-color: #007BFF; color: white; text-decoration: none; border-radius: 4px;"
        sec:authorize="isAuthenticated()" onclick="window.location.href='/user/profile'">
        Meu Perfil
    </button>




    <h1>Todos os Produtos</h1>

    <div th:if="${products.isEmpty()}">
        <p>Nenhum produto disponível.</p>
    </div>

    <div th:each="product : ${products}">
        <h3 th:text="${product.nameProduct}"></h3>
        <p>Preço: R$ <span th:text="${product.price}"></span></p>
        <img th:src="@{${product.imageUrl}}" alt="Imagem do produto" />
         <a th:href="@{'/products/' + ${product.slug}}">Ver detalhes</a>



        <hr />
    </div>



</body>

<script>
    setTimeout(function () {
        var msg = document.getElementById('msgLogout');
        if (msg) {
            msg.style.display = 'none';
        }
    }, 3000);
</script>

</html>